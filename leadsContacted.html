<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contacted Leads - Saiviru</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.2/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    
    <link href="./css/leads.css" rel="stylesheet" />
</head>
<body>
    <section class="container py-3 py-lg-5">
        <h1 class="text-center pb-3 pb-lg-5">Lead contact details</h1>
       <div id = "loading"></div>
        <table id = "employees" class="table">
            <tr>
              <th id = "name" class="table__heading">Name</th>
              <th id = "email" class="table__heading">Email</th>
              <th id = "phone" class="table__heading">Phone</th>
              <th id ="message" class="table__heading">Message</th>
              <th id = "date" class="table__heading">Date</th>
            </tr>
            <!-- <tr id = "row" class="table__row">
              <td class="table__content" data-heading="Name">Sai Kiran</td>
              <td class="table__content" data-heading="Email">saiviru@live.com</td>
              <td class="table__content" data-heading="Phone">7416343790</td>
              <td class="table__content" data-heading="Message">Contact me back at 9897686767</td>
              <td class="table__content" data-heading="Date">16-01-2022</td>
            </tr> -->
  
          </table>
    </section>
    <script >
      console.log("iam back");
      console.log("hellooooooooooo")
      // fetch('/getDetails')
      //   .then(data => {
      //   return data.json();
      //   })
      //   .then(users => {
      //   console.log(users);


      //   });




        const api_url = 
      "/getDetails";
  
// Defining async function
async function getapi(url) {
    
    // Storing response
    const response = await fetch(url);
    
    // Storing data in form of JSON
    var data = await response.json();
    console.log(data);
    if (response) {
        hideloader();
    }
    show(data);
    console.log("data");
}
// Calling that async function
getapi(api_url);
  
// Function to hide the loader
function hideloader() {
    document.getElementById('loading').display = 'none';
}
// Function to define innerHTML for HTML table
function show(data) {
    let tab = 
        `<tr>
          <th>Name</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Message</th>
          <th>Date<th>
         </tr>`;
    
    // Loop to access all rows 
    for (let r of data) {
        tab += `<tr> 
    <td>${r.name} </td>
    <td>${r.email}</td>
    <td>${r.phone}</td> 
    <td>${r.message}</td>  
    <td>${r.date}</td>         
</tr>`;
    }
    // Setting innerHTML as tab variable
    document.getElementById("employees").innerHTML = tab;
}
    //   const api_url = "https://saiviru.in/getDetails'";
    //  async function loadIntoTable(url, table) {
    //    const row  = table.querySelector(".table__row");
    //    const content = table.querySelector(".table__content");
    //   //  const content = table.querySelector("table__content");
    //   //  const content = table.querySelector("table__content");
    //   //  const content = table.querySelector("table__content");
    //   //  const content = table.querySelector("table__content");
    //    const response = await fetch(url);
    //    var data = await response.json();

    //    console.log(data);
    //  }

    //  loadIntoTable("/getDetails", document.querySelector("employees"));







    </script>
</body>
</html>2